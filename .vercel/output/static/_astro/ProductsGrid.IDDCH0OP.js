import{j as e}from"./jsx-runtime.GZM-AlAv.js";import{r as o}from"./index.120yQdpc.js";const L=({id:n,title:t,price:c,image:r})=>e.jsx(e.Fragment,{children:e.jsx("li",{className:"box",id:n,children:e.jsxs("a",{href:`/products/${n}`,tabIndex:"0","aria-label":`This is an link to go to the product called ${t}`,children:[e.jsx("picture",{className:"img-box",children:e.jsx("img",{title:t,src:r,alt:`This is an image of the product called ${t}`,loading:"lazy",decoding:"async","aria-label":`This is an image of the product called ${t}`})}),e.jsxs("div",{className:"detail-box",children:[e.jsx("h6",{className:"product-title",children:t}),e.jsxs("h6",{className:"product-price",children:["Price",e.jsxs("span",{children:[" $",c]})]})]}),e.jsx("div",{className:"new",children:e.jsx("span",{children:"New"})})]})},n)});function W({products:n}){return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"grid-layout product-detail-container",children:n.map(({id:t,image:c,title:r,price:a})=>e.jsx(L,{id:t.toString(),image:c.src,title:r,price:a.toString()},t))})})}function F(){return e.jsxs("div",{className:"no-results-container",children:[e.jsx("h1",{children:"Nothing Found"}),e.jsxs("p",{children:["Sorry, but nothing matched your search. ",e.jsx("br",{}),"Please try again with some different keywords."]})]})}function _({products:n}){return(n?n.length>0:!1)?e.jsx(W,{products:n}):e.jsx(F,{})}const K={src:"/_astro/redBerry.qRulwttW.webp",width:1024,height:1024,format:"webp"},G={src:"/_astro/powerBlack.VHmkRznO.webp",width:1024,height:1024,format:"webp"},$={src:"/_astro/crystalGloss.vohcom4f.webp",width:1024,height:1024,format:"webp"},q={src:"/_astro/pinkRose.qS5yM0QA.webp",width:1024,height:1024,format:"webp"},D={src:"/_astro/jaian.CP7LeQHG.webp",width:1024,height:1024,format:"webp"},C=[{id:"red-berry-womens-rain-boots",title:"RED BERRY RAINKERS WOMEN'S RAIN BOOTS",price:76,description:"Meet your 365 days boot! Comfortable and functional, yet stylish, our Rainkers are the perfect match for your day-to-day activities.",category:"boot",image:K,rating:{rate:4.7,count:130},size:["36","37","38","39","40","41","42"]},{id:"uc-white-womens-sneakers",title:"JA - IAN WOMEN'S SNEAKERS",price:72,description:"Meet your new essential shoe! Comfortable and functional, yet stylish, our Sneakers are the perfect match for your day-to-day activities.",category:"sneaker",image:D,rating:{rate:4.7,count:130},size:["36","37","38","39","40"]},{id:"power-black-rainkers-womens-rain-boots",title:"POWER BLACK RAINKERS WOMEN'S RAIN BOOTS",price:71,description:"Las botas impermeables Rainkers son la combinación perfecta de comodidad y estilo. Con su diseño elegante y negro, son el complemento perfecto para cualquier atuendo. Además, su exterior impermeable te mantendrá los pies secos y cómodos, sin importar el clima.",category:"boots",image:G,rating:{rate:4.7,count:130},size:["38","39","40","41","42"]},{id:"crystal-gloss-rainkers-womens-rain-boots",title:"CRYSTAL GLOSS RAINKERS WOMEN'S RAIN BOOTS",price:81,description:"Whether you're navigating city streets or exploring the great outdoors, our Rainkers provide the support and traction you need to conquer any terrain. The comfortable cushioning ensures all-day comfort, while the stylish, transparent design keeps you looking your best.",image:$,rating:{rate:4.7,count:130},size:["38","39","40"]},{id:"pink-rose-rainkers-womens-rain-boots",title:"PINK ROSÉ RAINKERS WOMEN'S RAIN BOOTS",price:71,description:"Experience the perfect blend of style and function with our pink Rainkers. Order your pair today and step out in confidence, rain or shine.",image:q,rating:{rate:4.7,count:130},size:["39"]}],k=n=>n?.map(t=>({id:t.id,title:t.title,description:t.description,category:t.category,image:t.image,rating:t.rating,size:t.size,price:t.price})),I=({searchVal:n})=>{if(n==="")return k(C);try{n=n.toUpperCase();const t=C.filter(c=>c.title.includes(n));return k(t)}catch{throw new Error("Error al cargar productos")}};function Q({sort:n,paginationLimit:t,initialProducts:c,searchVal:r}){const[a,p]=o.useState(c),f=o.useRef(),g=Math.ceil(a.length/t),[l,b]=o.useState(1),[x,w]=o.useState([]),v=o.useCallback(({searchVal:s,sort:d,paginationLimit:u})=>{if(s!==f.current)try{f.current=s;const m=I({searchVal:s});if(p(m),b(1),s.length>0){const y={q:s},S=new URLSearchParams(y),P=window.location.pathname+"?"+S.toString();history.replaceState(history.state,"",P)}else history.replaceState(history.state,"",window.location.pathname)}catch{}finally{}},[]);o.useEffect(()=>{if(r){const s=I({searchVal:r});p(s),b(1)}},[]);const N=()=>{if(a){if(n==="nombre")return[...a].sort(function(s,d){return s.title.localeCompare(d.title)});if(n==="precio")return[...a].sort(function(s,d){return s.price-d.price})}},j=o.useMemo(()=>{let s=(l-1)*t;const d=l*t;return N().filter((m,y)=>y>=s&&y<d)},[n,a,l,t]);return o.useEffect(()=>{const s=u=>{b(Number(u.target.innerText))},d=[];for(let u=1;u<=g;u++){let m=l==u?"pagination-number active":"pagination-number";d.push(e.jsx("button",{className:m,"page-index":u,"aria-label":`Page ${u}`,onClick:s,tabIndex:0,children:u},u))}w(d)},[a,t,l]),{products:j,getProducts:v,currentPage:l,pageCount:g,pageNumbers:x,setCurrentPage:b}}var H=U;function U(n,t,c){var r=null,a=null,p=function(){r&&(clearTimeout(r),a=null,r=null)},f=function(){var l=a;p(),l&&l()},g=function(){if(!t)return n.apply(this,arguments);var l=this,b=arguments,x=c&&!r;if(p(),a=function(){n.apply(l,b)},r=setTimeout(function(){if(r=null,!x){var w=a;return a=null,w()}},t),x)return a()};return g.cancel=p,g.flush=f,g}function Y({query:n}){const[t,c]=o.useState(n),r=o.useRef(null);return o.useEffect(()=>{setTimeout(function(){r.current.selectionStart=r.current.selectionEnd=n?.length||0},50)},[]),{searchVal:t,setSearchVal:c,inputRef:r}}const X=({initialProducts:n,query:t})=>{const c=o.useId(),r=o.useId(),a=[{value:"nombre",label:"Nombre"},{value:"precio",label:"Precio"}],p=[{value:"4",label:"4"},{value:"8",label:"8"}],[f,g]=o.useState(p[0].value),[l,b]=o.useState(a[0].value),{searchVal:x,setSearchVal:w,inputRef:v}=Y({query:t}),{products:N,getProducts:j,currentPage:s,pageCount:d,pageNumbers:u,setCurrentPage:m}=Q({sort:l,paginationLimit:f,initialProducts:n,searchVal:x}),y=N.length>0?"pagination-container":"pagination-container hide",S=s===1,P=S?"pagination-button disabled":"pagination-button",R=d===s,O=R?"pagination-button disabled":"pagination-button",E=o.useCallback(H(i=>{j({searchVal:i})},500),[]),B=i=>{const h=i.target.value;b(h)},A=i=>{const h=i.target.value;g(h),m(1)},T=i=>{const h=i.target.value;w(h),E(h)},M=()=>{m(s-1)},z=()=>{m(s+1)};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"products-section",children:[e.jsx("span",{className:"heading_container heading_center",children:e.jsx("h2",{children:"Products"})}),e.jsxs("form",{className:"search-wrapper",onSubmit:i=>{i.preventDefault()},children:[e.jsx("div",{className:"input-group search-input-group",children:e.jsx("input",{name:"query",type:"search",id:"search",className:"search-input",placeholder:"Product name",maxLength:"80",value:x,onChange:T,title:"Search product by name","aria-label":"Product name",ref:v,autoFocus:!0})}),e.jsxs("div",{className:"input-group show-input-group",children:[e.jsx("label",{htmlFor:c,children:"Sort by"}),e.jsx("select",{id:c,value:l,onChange:B,name:"sortBy",tabIndex:"0",title:"Choose an option",className:"sort-select","aria-label":"Sort by",children:a.map(({value:i,label:h})=>e.jsx("option",{value:i,children:h},i))})]}),e.jsxs("div",{className:"input-group show-input-group",children:[e.jsx("label",{htmlFor:r,children:"Show"}),e.jsx("select",{id:r,value:f,name:"show",className:"show-select",tabIndex:"0",onChange:A,"aria-label":"Show",title:"Choose an option",children:p.map(({value:i,label:h})=>e.jsx("option",{value:i,children:h},i))})]})]}),e.jsx(_,{products:N}),e.jsx("div",{className:y,children:e.jsxs("nav",{className:"pagination-body",children:[e.jsxs("button",{className:P,id:"prev-button","aria-label":"Previous page",title:"Previous page",disabled:S,onClick:M,tabIndex:"0",children:[" ","<"]}),e.jsx("div",{id:"pagination-numbers",children:u}),e.jsxs("button",{className:O,id:"next-button","aria-label":"Next page",title:"Next page",disabled:R,onClick:z,tabIndex:"0",children:[" ",">"]})]})})]})})};export{X as default};
