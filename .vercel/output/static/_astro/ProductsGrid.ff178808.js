import{j as e}from"./jsx-runtime.21f6a92b.js";import{r as a}from"./index.c7f9a1cc.js";const z=({id:r,title:t,price:o,image:s})=>e.jsx(e.Fragment,{children:e.jsx("li",{className:"box",id:r,children:e.jsxs("a",{href:`/product/${r}`,tabIndex:"0","aria-label":`This is an link to go to the product called ${t}`,children:[e.jsx("picture",{className:"img-box",children:e.jsx("img",{title:t,src:s,alt:`This is an image of the product called ${t}`,loading:"lazy",decoding:"async","aria-label":`This is an image of the product called ${t}`})}),e.jsxs("div",{className:"detail-box",children:[e.jsx("h6",{className:"product-title",children:t}),e.jsxs("h6",{className:"product-price",children:["Price",e.jsxs("span",{children:[" $",o]})]})]}),e.jsx("div",{className:"new",children:e.jsx("span",{children:"New"})})]})},r)});function F({products:r}){return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"grid-layout product-detail-container",children:r.map(({id:t,image:o,title:s,price:n})=>e.jsx(z,{id:t.toString(),image:o.src,title:s,price:n.toString()},t))})})}function W(){return e.jsxs("div",{className:"no-results-container",children:[e.jsx("h1",{children:"Nothing Found"}),e.jsxs("p",{children:["Sorry, but nothing matched your search. ",e.jsx("br",{}),"Please try again with some different keywords."]})]})}function _({products:r}){return(r?r.length>0:!1)?e.jsx(F,{products:r}):e.jsx(W,{})}const K={src:"/_astro/redBerry.029028f0.webp",width:1024,height:1024,format:"webp"},$={src:"/_astro/powerBlack.dd026a18.webp",width:1024,height:1024,format:"webp"},D={src:"/_astro/crystalGloss.282b7002.webp",width:1024,height:1024,format:"webp"},G={src:"/_astro/pinkRose.056057b7.webp",width:1024,height:1024,format:"webp"},L={src:"/_astro/jaian.6debc6e4.webp",width:1024,height:1024,format:"webp"},P=[{id:1,title:"RED BERRY RAINKERS WOMEN'S RAIN BOOTS",price:76,description:"Meet your 365 days boot! Comfortable and functional, yet stylish, our Rainkers are the perfect match for your day-to-day activities.",category:"boot",image:K,rating:{rate:4.7,count:130},size:["36","37","38","39","40","41","42"]},{id:2,title:"JA - IAN WOMEN'S SNEAKERS",price:72,description:"Meet your new essential shoe! Comfortable and functional, yet stylish, our Sneakers are the perfect match for your day-to-day activities.",category:"sneaker",image:L,rating:{rate:4.7,count:130},size:["36","37","38","39","40"]},{id:3,title:"POWER BLACK RAINKERS WOMEN'S RAIN BOOTS",price:71,description:"Las botas impermeables Rainkers son la combinación perfecta de comodidad y estilo. Con su diseño elegante y negro, son el complemento perfecto para cualquier atuendo. Además, su exterior impermeable te mantendrá los pies secos y cómodos, sin importar el clima.",category:"boots",image:$,rating:{rate:4.7,count:130},size:["38","39","40","41","42"]},{id:4,title:"CRYSTAL GLOSS RAINKERS WOMEN'S RAIN BOOTS",price:81,description:"Whether you're navigating city streets or exploring the great outdoors, our Rainkers provide the support and traction you need to conquer any terrain. The comfortable cushioning ensures all-day comfort, while the stylish, transparent design keeps you looking your best.",image:D,rating:{rate:4.7,count:130},size:["38","39","40"]},{id:5,title:"PINK ROSÉ RAINKERS WOMEN'S RAIN BOOTS",price:71,description:"Experience the perfect blend of style and function with our pink Rainkers. Order your pair today and step out in confidence, rain or shine.",image:G,rating:{rate:4.7,count:130},size:["39"]}],R=r=>r?.map(t=>({id:t.id,title:t.title,description:t.description,category:t.category,image:t.image,rating:t.rating,size:t.size,price:t.price})),C=({searchVal:r})=>{if(r==="")return R(P);try{r=r.toUpperCase();const t=P.filter(o=>o.title.includes(r));return R(t)}catch{throw new Error("Error al cargar productos")}};function q({sort:r,paginationLimit:t,initialProducts:o,searchVal:s}){const[n,p]=a.useState(o),b=a.useRef(),m=Math.ceil(n.length/t),[u,g]=a.useState(1),[f,x]=a.useState([]),j=a.useCallback(({searchVal:i})=>{if(i!==b.current)try{b.current=i;const d=C({searchVal:i});p(d),g(1)}catch{}finally{}},[]);a.useEffect(()=>{if(s){const i=C({searchVal:s});p(i),g(1)}},[]);const v=()=>{if(n){if(r==="nombre")return[...n].sort(function(i,d){return i.title.localeCompare(d.title)});if(r==="precio")return[...n].sort(function(i,d){return i.price-d.price})}},N=a.useMemo(()=>{let i=(u-1)*t;const d=u*t;return v().filter((S,y)=>y>=i&&y<d)},[r,n,u,t]);return a.useEffect(()=>{const i=l=>{g(Number(l.target.innerText))},d=[];for(let l=1;l<=m;l++){let S=u==l?"pagination-number active":"pagination-number";d.push(e.jsx("button",{className:S,"page-index":l,"aria-label":`Page ${l}`,onClick:i,tabIndex:0,children:l},l))}x(d)},[n,t,u]),{products:N,getProducts:j,currentPage:u,pageCount:m,pageNumbers:f,setCurrentPage:g}}var Y=J;function J(r,t,o){var s=null,n=null,p=function(){s&&(clearTimeout(s),n=null,s=null)},b=function(){var u=n;p(),u&&u()},m=function(){if(!t)return r.apply(this,arguments);var u=this,g=arguments,f=o&&!s;if(p(),n=function(){r.apply(u,g)},s=setTimeout(function(){if(s=null,!f){var x=n;return n=null,x()}},t),f)return n()};return m.cancel=p,m.flush=b,m}function Q(){const[r,t]=a.useState(null),[o,s]=a.useState(""),n=a.useRef(!0);return a.useEffect(()=>{if(n.current){n.current=o==="";return}t(null)},[o]),{searchVal:o,setSearchVal:s,error:r}}const H=({initialProducts:r})=>{const t=a.useId(),o=a.useId(),s=[{value:"nombre",label:"Nombre"},{value:"precio",label:"Precio"}],n=[{value:"4",label:"4"},{value:"8",label:"8"}],[p,b]=a.useState(n[0].value),[m,u]=a.useState(s[0].value),{searchVal:g,setSearchVal:f,error:x}=Q(),{products:j,getProducts:v,currentPage:N,pageCount:i,pageNumbers:d,setCurrentPage:l}=q({sort:m,paginationLimit:p,initialProducts:r,searchVal:g}),S=j.length>0?"pagination-container":"pagination-container hide",y=N===1,I=y?"pagination-button disabled":"pagination-button",w=i===N,k=w?"pagination-button disabled":"pagination-button",E=a.useCallback(Y(c=>{v({searchVal:c})},500),[]),O=c=>{const h=c.target.value;u(h)},B=c=>{const h=c.target.value;b(h),l(1)},A=c=>{const h=c.target.value;f(h),E(h)},T=()=>{l(N-1)},M=()=>{l(N+1)};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"products-section",children:[e.jsx("span",{className:"heading_container heading_center",children:e.jsx("h2",{children:"Products"})}),e.jsxs("form",{className:"search-wrapper",onSubmit:c=>{c.preventDefault()},children:[e.jsx("div",{className:"input-group search-input-group",children:e.jsx("input",{name:"query",type:"search",id:"search",className:"search-input",placeholder:"Product name",maxLength:"80",value:g,onChange:A,title:"Search product by name","aria-label":"Product name"})}),e.jsxs("div",{className:"input-group show-input-group",children:[e.jsx("label",{htmlFor:t,children:"Sort by"}),e.jsx("select",{id:t,value:m,onChange:O,name:"sortBy",tabIndex:"0",title:"Choose an option",className:"sort-select","aria-label":"Sort by",children:s.map(({value:c,label:h})=>e.jsx("option",{value:c,children:h},c))})]}),e.jsxs("div",{className:"input-group show-input-group",children:[e.jsx("label",{htmlFor:o,children:"Show"}),e.jsx("select",{id:o,value:p,name:"show",className:"show-select",tabIndex:"0",onChange:B,"aria-label":"Show",title:"Choose an option",children:n.map(({value:c,label:h})=>e.jsx("option",{value:c,children:h},c))})]})]}),x&&e.jsx("p",{className:"error",children:x}),e.jsx(_,{products:j}),e.jsx("div",{className:S,children:e.jsxs("nav",{className:"pagination-body",children:[e.jsxs("button",{className:I,id:"prev-button","aria-label":"Previous page",title:"Previous page",disabled:y,onClick:T,tabIndex:"0",children:[" ","<"]}),e.jsx("div",{id:"pagination-numbers",children:d}),e.jsxs("button",{className:k,id:"next-button","aria-label":"Next page",title:"Next page",disabled:w,onClick:M,tabIndex:"0",children:[" ",">"]})]})})]})})};export{H as default};
